var selector=function(e){"use strict";var t=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,t){var r=/(\[[^\]]+\])/g,s=/(#[^\s\.\[\]:]+)/g,i=/(\.[^\s\.:]+)/g,n=/(::[^\s\.:]+|:first-line|:first-letter|:before|:after)/g,a=/(:[^\s\.:]+)/g,o=/([^\s\.:]+)/g,l=/:not\(([^\)]*)\)/g,u=/[\*\s\+>~]+/g;e.exports=function(e){var t,c=[];if(!e)return;if("string"==typeof e)e=e.split(",");else if(!Array.isArray(e))return;if(e.forEach((function(e){var p=function(e){if("string"!=typeof e)return;function t(t){var r=e.match(t);return r?(e=e.replace(t,""),r.length):0}var c=0,p=0,f=0;return e=e.replace(l," $1 ").replace(u," "),c+=t(s),p+=t(r),p+=t(i),f+=t(n),p+=t(a),f+=t(o),[0,c,p,f]}(e);t=t||!!p,c.push(p)})),t)return c.length>1?c:c[0]}}));const r={active:"active",blank:"blank",checked:"checked",disabled:"disabled",empty:"empty",enabled:"enabled","first-child":"the first child of its parent","first-of-type":"the first of its type in its parent",focus:"focused",hover:"hovered",indeterminate:"indeterminate","in-range":"in-range",invalid:"invalid","last-child":"the last child of its parent","last-of-type":"the last of its type in its parent","nth-child":"the nth child (formula) of its parent","nth-of-type":"the nth of its type (formula) in its parent","only-child":"the only child of its parent","only-of-type":"the only of its type in its parent",optional:"optional","out-of-range":"out-of-range","read-only":"read-only","read-write":"read-write",required:"required",target:"targeted",valid:"valid",visited:"visited"},s=["html","body","head"];var i=e=>`\`${e}\``,n=({name:e})=>Object.keys(r).includes(e),a=e=>{const{id:t,tagName:r}=e,a=[r&&"*"!==r?i(`<${r}>`):"","element"].filter(Boolean).join(" "),o=t||s.includes(r)?"the":/^[aeiouy]/.test(a.replace("`<",""))?"an":"a";return(({pseudos:e=[]})=>{const t=e.find(e=>""!==e.name&&!n(e));return t?`the ${i(t.name)} pseudo-element of `:""})(e)+o+" "+a},o=e=>e.reduce((t,r,s)=>0===s?t+r:s===e.length-1?t+" and "+r:t+", "+r,"");const l=e=>{if(""===e.value)return"="===e.operator?"whose value is empty":"";const t=i(e.value);switch(e.operator){case"=":return"whose value is "+t;case"*=":return"whose value contains "+t;case"^=":return"whose value starts with "+t;case"$=":return"whose value ends with "+t;case"~=":return"whose value is a space-separated list of values, one of which is "+t;case"|=":return"whose value is an hyphen-separated list of values, one of which is "+t}};var u=({attrs:e=[]})=>o(e.map(e=>["an attribute",i(e.name),l(e)].filter(Boolean).join(" "))),c=({classNames:e=[]})=>0===e.length?"":1===e.length?"class "+i(e[0]):"classes "+o(e.map(i)),p=({id:e})=>e?`id ${i(e)}`:"";const f=(e,t,r)=>0===r?e+"with "+t:e+" and "+t;var h=e=>[p,c,u].map(t=>t(e)).filter(Boolean).reduce(f,""),d=({pseudos:e=[]})=>{const t=e.filter(n).map(e=>r[e.name]);return t.length>0?`provided it is ${o(t)}`:""};var v=e=>e.reduce((t,r,s)=>{const i=t+(e=>[a,h,d].map(t=>t(e)).filter(Boolean).join(" "))(r);return s===e.length-1?i:i+(0===s?"":" itself")+(({nestingOperator:e})=>{switch(e){case">":return" directly within ";case"+":return" directly adjacent to ";case"~":return" after ";default:return" within "}})(r)},"");function g(){this.pseudos={},this.attrEqualityMods={},this.ruleNestingOperators={},this.substitutesEnabled=!1}function y(e){return e>="a"&&e<="f"||e>="A"&&e<="F"||e>="0"&&e<="9"}g.prototype.registerSelectorPseudos=function(e){for(var t=0,r=arguments.length;t<r;t++)e=arguments[t],this.pseudos[e]="selector";return this},g.prototype.unregisterSelectorPseudos=function(e){for(var t=0,r=arguments.length;t<r;t++)e=arguments[t],delete this.pseudos[e];return this},g.prototype.registerNumericPseudos=function(e){for(var t=0,r=arguments.length;t<r;t++)e=arguments[t],this.pseudos[e]="numeric";return this},g.prototype.unregisterNumericPseudos=function(e){for(var t=0,r=arguments.length;t<r;t++)e=arguments[t],delete this.pseudos[e];return this},g.prototype.registerNestingOperators=function(e){for(var t=0,r=arguments.length;t<r;t++)e=arguments[t],this.ruleNestingOperators[e]=!0;return this},g.prototype.unregisterNestingOperators=function(e){for(var t=0,r=arguments.length;t<r;t++)e=arguments[t],delete this.ruleNestingOperators[e];return this},g.prototype.registerAttrEqualityMods=function(e){for(var t=0,r=arguments.length;t<r;t++)e=arguments[t],this.attrEqualityMods[e]=!0;return this},g.prototype.unregisterAttrEqualityMods=function(e){for(var t=0,r=arguments.length;t<r;t++)e=arguments[t],delete this.attrEqualityMods[e];return this},g.prototype.enableSubstitutes=function(){return this.substitutesEnabled=!0,this},g.prototype.disableSubstitutes=function(){return this.substitutesEnabled=!1,this};var m={"!":!0,'"':!0,"#":!0,$:!0,"%":!0,"&":!0,"'":!0,"(":!0,")":!0,"*":!0,"+":!0,",":!0,".":!0,"/":!0,";":!0,"<":!0,"=":!0,">":!0,"?":!0,"@":!0,"[":!0,"\\":!0,"]":!0,"^":!0,"`":!0,"{":!0,"|":!0,"}":!0,"~":!0},b={"\n":"\\n","\r":"\\r","\t":"\\t","\f":"\\f","\v":"\\v"},w={n:"\n",r:"\r",t:"\t",f:"\f","\\":"\\","'":"'"},E={n:"\n",r:"\r",t:"\t",f:"\f","\\":"\\",'"':'"'};function A(e,t,r,s,i,n){var a,o,l,u,c;return u=e.length,a=null,l=function(r,s){var i,n,o;for(o="",t++,a=e.charAt(t);t<u;){if(a===r)return t++,o;if("\\"===a)if(t++,(a=e.charAt(t))===r)o+=r;else if(i=s[a])o+=i;else{if(y(a)){for(n=a,t++,a=e.charAt(t);y(a);)n+=a,t++,a=e.charAt(t);" "===a&&(t++,a=e.charAt(t)),o+=String.fromCharCode(parseInt(n,16));continue}o+=a}else o+=a;t++,a=e.charAt(t)}return o},o=function(){var r,s="";for(a=e.charAt(t);t<u;){if((r=a)>="a"&&r<="z"||r>="A"&&r<="Z"||r>="0"&&r<="9"||"-"===r||"_"===r)s+=a;else{if("\\"!==a)return s;if(++t>=u)throw Error("Expected symbol but end of file reached.");if(a=e.charAt(t),m[a])s+=a;else{if(y(a)){var i=a;for(t++,a=e.charAt(t);y(a);)i+=a,t++,a=e.charAt(t);" "===a&&(t++,a=e.charAt(t)),s+=String.fromCharCode(parseInt(i,16));continue}s+=a}}t++,a=e.charAt(t)}return s},c=function(){a=e.charAt(t);for(var r=!1;" "===a||"\t"===a||"\n"===a||"\r"===a||"\f"===a;)r=!0,t++,a=e.charAt(t);return r},this.parse=function(){var r=this.parseSelector();if(t<u)throw Error('Rule expected but "'+e.charAt(t)+'" found.');return r},this.parseSelector=function(){var r,s=r=this.parseSingleSelector();for(a=e.charAt(t);","===a;){if(t++,c(),"selectors"!==r.type&&(r={type:"selectors",selectors:[s]}),!(s=this.parseSingleSelector()))throw Error('Rule expected after ",".');r.selectors.push(s)}return r},this.parseSingleSelector=function(){c();var r={type:"ruleSet"},s=this.parseRule();if(!s)return null;for(var n=r;s&&(s.type="rule",n.rule=s,n=s,c(),a=e.charAt(t),!(t>=u||","===a||")"===a));)if(i[a]){var o=a;if(t++,c(),!(s=this.parseRule()))throw Error('Rule expected after "'+o+'".');s.nestingOperator=o}else(s=this.parseRule())&&(s.nestingOperator=null);return r},this.parseRule=function(){for(var i,p=null;t<u;)if("*"===(a=e.charAt(t)))t++,(p=p||{}).tagName="*";else if((i=a)>="a"&&i<="z"||i>="A"&&i<="Z"||"-"===i||"_"===i||"\\"===a)(p=p||{}).tagName=o();else if("."===a)t++,((p=p||{}).classNames=p.classNames||[]).push(o());else if("#"===a)t++,(p=p||{}).id=o();else if("["===a){t++,c();var f={name:o()};if(c(),"]"===a)t++;else{var h="";if(s[a]&&(h=a,t++,a=e.charAt(t)),t>=u)throw Error('Expected "=" but end of file reached.');if("="!==a)throw Error('Expected "=" but "'+a+'" found.');f.operator=h+"=",t++,c();var d="";if(f.valueType="string",'"'===a)d=l('"',E);else if("'"===a)d=l("'",w);else if(n&&"$"===a)t++,d=o(),f.valueType="substitute";else{for(;t<u&&"]"!==a;)d+=a,t++,a=e.charAt(t);d=d.trim()}if(c(),t>=u)throw Error('Expected "]" but end of file reached.');if("]"!==a)throw Error('Expected "]" but "'+a+'" found.');t++,f.value=d}((p=p||{}).attrs=p.attrs||[]).push(f)}else{if(":"!==a)break;t++;var v=o(),g={name:v};if("("===a){t++;var y="";if(c(),"selector"===r[v])g.valueType="selector",y=this.parseSelector();else{if(g.valueType=r[v]||"string",'"'===a)y=l('"',E);else if("'"===a)y=l("'",w);else if(n&&"$"===a)t++,y=o(),g.valueType="substitute";else{for(;t<u&&")"!==a;)y+=a,t++,a=e.charAt(t);y=y.trim()}c()}if(t>=u)throw Error('Expected ")" but end of file reached.');if(")"!==a)throw Error('Expected ")" but "'+a+'" found.');t++,g.value=y}((p=p||{}).pseudos=p.pseudos||[]).push(g)}return p},this}g.prototype.parse=function(e){return new A(e,0,this.pseudos,this.attrEqualityMods,this.ruleNestingOperators,this.substitutesEnabled).parse()},g.prototype.escapeIdentifier=function(e){for(var t="",r=0,s=e.length;r<s;){var i=e.charAt(r);if(m[i])t+="\\"+i;else if("_"===i||"-"===i||i>="A"&&i<="Z"||i>="a"&&i<="z"||0!==r&&i>="0"&&i<="9")t+=i;else{var n=i.charCodeAt(0);if(55296==(63488&n)){var a=e.charCodeAt(r++);if(55296!=(64512&n)||56320!=(64512&a))throw Error("UCS-2(decode): illegal sequence");n=((1023&n)<<10)+(1023&a)+65536}t+="\\"+n.toString(16)+" "}r++}return t},g.prototype.escapeStr=function(e){for(var t,r,s="",i=0,n=e.length;i<n;)'"'===(t=e.charAt(i))?t='\\"':"\\"===t?t="\\\\":(r=b[t])&&(t=r),s+=t,i++;return'"'+s+'"'},g.prototype.render=function(e){return this._renderEntity(e).trim()},g.prototype._renderEntity=function(e){var t,r,s;switch(s="",e.type){case"ruleSet":for(t=e.rule,r=[];t;)t.nestingOperator&&r.push(t.nestingOperator),r.push(this._renderEntity(t)),t=t.rule;s=r.join(" ");break;case"selectors":s=e.selectors.map(this._renderEntity,this).join(", ");break;case"rule":e.tagName&&(s="*"===e.tagName?"*":this.escapeIdentifier(e.tagName)),e.id&&(s+="#"+this.escapeIdentifier(e.id)),e.classNames&&(s+=e.classNames.map((function(e){return"."+this.escapeIdentifier(e)}),this).join("")),e.attrs&&(s+=e.attrs.map((function(e){return e.operator?"substitute"===e.valueType?"["+this.escapeIdentifier(e.name)+e.operator+"$"+e.value+"]":"["+this.escapeIdentifier(e.name)+e.operator+this.escapeStr(e.value)+"]":"["+this.escapeIdentifier(e.name)+"]"}),this).join("")),e.pseudos&&(s+=e.pseudos.map((function(e){return e.valueType?"selector"===e.valueType?":"+this.escapeIdentifier(e.name)+"("+this._renderEntity(e.value)+")":"substitute"===e.valueType?":"+this.escapeIdentifier(e.name)+"($"+e.value+")":"numeric"===e.valueType?":"+this.escapeIdentifier(e.name)+"("+e.value+")":":"+this.escapeIdentifier(e.name)+"("+this.escapeIdentifier(e.value)+")":":"+this.escapeIdentifier(e.name)}),this).join(""));break;default:throw Error('Unknown entity type: "'+e.type(NaN))}return s};const S=new(0,{CssSelectorParser:{CssSelectorParser:g}.CssSelectorParser}.CssSelectorParser);S.registerNestingOperators(">","+","~"),S.registerAttrEqualityMods("^","$","*","~","|"),S.enableSubstitutes();const N=(e,t)=>{let r=e;for(;r.rule&&r.__id!==t.__id-1;)r=r.rule;return r.__id===t.__id-1?r:null};var _=e=>{const t=(e=>{try{const t=S.parse(e);if("ruleSet"!==t.type)throw new Error("Unsupported CSS selector");return(e=>{let t=0,r=e.rule;for(r.__id=t++;r.rule&&"rule"===r.rule.type;)r=r.rule,r.__id=t++})(t),t}catch(e){throw new Error("Invalid CSS selector")}})(e),r=(e=>{let t=e.rule;for(;t.rule&&"rule"===t.rule.type;)t=t.rule;return t})(t),s=[r];let i=null;for(;i=N(t,i||r);)s.push(i);return s};const $=(e,t)=>`<a href="${t}" rel="noopener noreferrer" target="_blank">${e}</a>`,x=e=>(e=>(e=>e.slice(0,1).toUpperCase()+e.slice(1))(e)+".")(e).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/`([^`]+)`/g,(...e)=>`<code>${e[1]}</code>`).replace(/([^yf]) within/g,(...e)=>`${e[1]}<br>… within`).replace(/([^y]) after/g,(...e)=>`${e[1]}<br>… after`).replace(/([^f]) directly/g,(...e)=>`${e[1]}<br>… directly`).replace(/element of/g,"element<br>… of").replace(/itself/g,"<br>… itself").replace(/nth child/g,$("nth child","https://css-tricks.com/examples/nth-child-tester/")).replace(/nth of its type/g,$("nth of its type","https://css-tricks.com/examples/nth-child-tester/"));return e.explain=(e,t={})=>{const r=e.split(/\s*,\s*/g).map(e=>v(_(e)));return t.html?r.map(x):r},e.specify=t,e}({});
