var App=function(){"use strict";function e(){this.pseudos={},this.attrEqualityMods={},this.ruleNestingOperators={},this.substitutesEnabled=!1}function t(e){return e>="a"&&e<="f"||e>="A"&&e<="F"||e>="0"&&e<="9"}e.prototype.registerSelectorPseudos=function(e){for(var t=0,r=arguments.length;t<r;t++)e=arguments[t],this.pseudos[e]="selector";return this},e.prototype.unregisterSelectorPseudos=function(e){for(var t=0,r=arguments.length;t<r;t++)e=arguments[t],delete this.pseudos[e];return this},e.prototype.registerNumericPseudos=function(e){for(var t=0,r=arguments.length;t<r;t++)e=arguments[t],this.pseudos[e]="numeric";return this},e.prototype.unregisterNumericPseudos=function(e){for(var t=0,r=arguments.length;t<r;t++)e=arguments[t],delete this.pseudos[e];return this},e.prototype.registerNestingOperators=function(e){for(var t=0,r=arguments.length;t<r;t++)e=arguments[t],this.ruleNestingOperators[e]=!0;return this},e.prototype.unregisterNestingOperators=function(e){for(var t=0,r=arguments.length;t<r;t++)e=arguments[t],delete this.ruleNestingOperators[e];return this},e.prototype.registerAttrEqualityMods=function(e){for(var t=0,r=arguments.length;t<r;t++)e=arguments[t],this.attrEqualityMods[e]=!0;return this},e.prototype.unregisterAttrEqualityMods=function(e){for(var t=0,r=arguments.length;t<r;t++)e=arguments[t],delete this.attrEqualityMods[e];return this},e.prototype.enableSubstitutes=function(){return this.substitutesEnabled=!0,this},e.prototype.disableSubstitutes=function(){return this.substitutesEnabled=!1,this};var r={"!":!0,'"':!0,"#":!0,$:!0,"%":!0,"&":!0,"'":!0,"(":!0,")":!0,"*":!0,"+":!0,",":!0,".":!0,"/":!0,";":!0,"<":!0,"=":!0,">":!0,"?":!0,"@":!0,"[":!0,"\\":!0,"]":!0,"^":!0,"`":!0,"{":!0,"|":!0,"}":!0,"~":!0},s={"\n":"\\n","\r":"\\r","\t":"\\t","\f":"\\f","\v":"\\v"},i={n:"\n",r:"\r",t:"\t",f:"\f","\\":"\\","'":"'"},n={n:"\n",r:"\r",t:"\t",f:"\f","\\":"\\",'"':'"'};function a(e,s,a,o,l,u){var c,h,p,f,d;return f=e.length,c=null,p=function(r,i){var n,a,o;for(o="",s++,c=e.charAt(s);s<f;){if(c===r)return s++,o;if("\\"===c)if(s++,(c=e.charAt(s))===r)o+=r;else if(n=i[c])o+=n;else{if(t(c)){for(a=c,s++,c=e.charAt(s);t(c);)a+=c,s++,c=e.charAt(s);" "===c&&(s++,c=e.charAt(s)),o+=String.fromCharCode(parseInt(a,16));continue}o+=c}else o+=c;s++,c=e.charAt(s)}return o},h=function(){var i,n="";for(c=e.charAt(s);s<f;){if((i=c)>="a"&&i<="z"||i>="A"&&i<="Z"||i>="0"&&i<="9"||"-"===i||"_"===i)n+=c;else{if("\\"!==c)return n;if(++s>=f)throw Error("Expected symbol but end of file reached.");if(c=e.charAt(s),r[c])n+=c;else{if(t(c)){var a=c;for(s++,c=e.charAt(s);t(c);)a+=c,s++,c=e.charAt(s);" "===c&&(s++,c=e.charAt(s)),n+=String.fromCharCode(parseInt(a,16));continue}n+=c}}s++,c=e.charAt(s)}return n},d=function(){c=e.charAt(s);for(var t=!1;" "===c||"\t"===c||"\n"===c||"\r"===c||"\f"===c;)t=!0,s++,c=e.charAt(s);return t},this.parse=function(){var t=this.parseSelector();if(s<f)throw Error('Rule expected but "'+e.charAt(s)+'" found.');return t},this.parseSelector=function(){var t,r=t=this.parseSingleSelector();for(c=e.charAt(s);","===c;){if(s++,d(),"selectors"!==t.type&&(t={type:"selectors",selectors:[r]}),!(r=this.parseSingleSelector()))throw Error('Rule expected after ",".');t.selectors.push(r)}return t},this.parseSingleSelector=function(){d();var t={type:"ruleSet"},r=this.parseRule();if(!r)return null;for(var i=t;r&&(r.type="rule",i.rule=r,i=r,d(),c=e.charAt(s),!(s>=f||","===c||")"===c));)if(l[c]){var n=c;if(s++,d(),!(r=this.parseRule()))throw Error('Rule expected after "'+n+'".');r.nestingOperator=n}else(r=this.parseRule())&&(r.nestingOperator=null);return t},this.parseRule=function(){for(var t,r=null;s<f;)if("*"===(c=e.charAt(s)))s++,(r=r||{}).tagName="*";else if((t=c)>="a"&&t<="z"||t>="A"&&t<="Z"||"-"===t||"_"===t||"\\"===c)(r=r||{}).tagName=h();else if("."===c)s++,((r=r||{}).classNames=r.classNames||[]).push(h());else if("#"===c)s++,(r=r||{}).id=h();else if("["===c){s++,d();var l={name:h()};if(d(),"]"===c)s++;else{var y="";if(o[c]&&(y=c,s++,c=e.charAt(s)),s>=f)throw Error('Expected "=" but end of file reached.');if("="!==c)throw Error('Expected "=" but "'+c+'" found.');l.operator=y+"=",s++,d();var m="";if(l.valueType="string",'"'===c)m=p('"',n);else if("'"===c)m=p("'",i);else if(u&&"$"===c)s++,m=h(),l.valueType="substitute";else{for(;s<f&&"]"!==c;)m+=c,s++,c=e.charAt(s);m=m.trim()}if(d(),s>=f)throw Error('Expected "]" but end of file reached.');if("]"!==c)throw Error('Expected "]" but "'+c+'" found.');s++,l.value=m}((r=r||{}).attrs=r.attrs||[]).push(l)}else{if(":"!==c)break;s++;var g=h(),v={name:g};if("("===c){s++;var w="";if(d(),"selector"===a[g])v.valueType="selector",w=this.parseSelector();else{if(v.valueType=a[g]||"string",'"'===c)w=p('"',n);else if("'"===c)w=p("'",i);else if(u&&"$"===c)s++,w=h(),v.valueType="substitute";else{for(;s<f&&")"!==c;)w+=c,s++,c=e.charAt(s);w=w.trim()}d()}if(s>=f)throw Error('Expected ")" but end of file reached.');if(")"!==c)throw Error('Expected ")" but "'+c+'" found.');s++,v.value=w}((r=r||{}).pseudos=r.pseudos||[]).push(v)}return r},this}e.prototype.parse=function(e){return new a(e,0,this.pseudos,this.attrEqualityMods,this.ruleNestingOperators,this.substitutesEnabled).parse()},e.prototype.escapeIdentifier=function(e){for(var t="",s=0,i=e.length;s<i;){var n=e.charAt(s);if(r[n])t+="\\"+n;else if("_"===n||"-"===n||n>="A"&&n<="Z"||n>="a"&&n<="z"||0!==s&&n>="0"&&n<="9")t+=n;else{var a=n.charCodeAt(0);if(55296==(63488&a)){var o=e.charCodeAt(s++);if(55296!=(64512&a)||56320!=(64512&o))throw Error("UCS-2(decode): illegal sequence");a=((1023&a)<<10)+(1023&o)+65536}t+="\\"+a.toString(16)+" "}s++}return t},e.prototype.escapeStr=function(e){for(var t,r,i="",n=0,a=e.length;n<a;)'"'===(t=e.charAt(n))?t='\\"':"\\"===t?t="\\\\":(r=s[t])&&(t=r),i+=t,n++;return'"'+i+'"'},e.prototype.render=function(e){return this._renderEntity(e).trim()},e.prototype._renderEntity=function(e){var t,r,s;switch(s="",e.type){case"ruleSet":for(t=e.rule,r=[];t;)t.nestingOperator&&r.push(t.nestingOperator),r.push(this._renderEntity(t)),t=t.rule;s=r.join(" ");break;case"selectors":s=e.selectors.map(this._renderEntity,this).join(", ");break;case"rule":e.tagName&&(s="*"===e.tagName?"*":this.escapeIdentifier(e.tagName)),e.id&&(s+="#"+this.escapeIdentifier(e.id)),e.classNames&&(s+=e.classNames.map((function(e){return"."+this.escapeIdentifier(e)}),this).join("")),e.attrs&&(s+=e.attrs.map((function(e){return e.operator?"substitute"===e.valueType?"["+this.escapeIdentifier(e.name)+e.operator+"$"+e.value+"]":"["+this.escapeIdentifier(e.name)+e.operator+this.escapeStr(e.value)+"]":"["+this.escapeIdentifier(e.name)+"]"}),this).join("")),e.pseudos&&(s+=e.pseudos.map((function(e){return e.valueType?"selector"===e.valueType?":"+this.escapeIdentifier(e.name)+"("+this._renderEntity(e.value)+")":"substitute"===e.valueType?":"+this.escapeIdentifier(e.name)+"($"+e.value+")":"numeric"===e.valueType?":"+this.escapeIdentifier(e.name)+"("+e.value+")":":"+this.escapeIdentifier(e.name)+"("+this.escapeIdentifier(e.value)+")":":"+this.escapeIdentifier(e.name)}),this).join(""));break;default:throw Error('Unknown entity type: "'+e.type(NaN))}return s};const o=new(0,{CssSelectorParser:{CssSelectorParser:e}.CssSelectorParser}.CssSelectorParser);o.registerNestingOperators(">","+","~"),o.registerAttrEqualityMods("^","$","*","~","|"),o.enableSubstitutes();const l=(e,t)=>{let r=e;for(;r.rule&&r.__id!==t.__id-1;)r=r.rule;return r.__id===t.__id-1?r:null};var u=e=>{const t=(e=>{try{const t=o.parse(e);if("ruleSet"!==t.type)throw new Error("Unsupported CSS selector");return(e=>{let t=0,r=e.rule;for(r.__id=t++;r.rule&&"rule"===r.rule.type;)r=r.rule,r.__id=t++})(t),t}catch(e){throw new Error("Invalid CSS selector")}})(e),r=(e=>{let t=e.rule;for(;t.rule&&"rule"===t.rule.type;)t=t.rule;return t})(t),s=[r];let i=null;for(;i=l(t,i||r);)s.push(i);return s};const c={active:"active",blank:"blank",checked:"checked",disabled:"disabled",empty:"empty",enabled:"enabled","first-child":"the first child of its parent","first-of-type":"the first of its type in its parent",focus:"focused",hover:"hovered",indeterminate:"indeterminate","in-range":"in-range",invalid:"invalid","last-child":"the last child of its parent","last-of-type":"the last of its type in its parent","nth-child":"the nth child (formula) of its parent","nth-of-type":"the nth of its type (formula) in its parent","only-child":"the only child of its parent","only-of-type":"the only of its type in its parent",optional:"optional","out-of-range":"out-of-range","read-only":"read-only","read-write":"read-write",required:"required",target:"targeted",valid:"valid",visited:"visited"},h=["html","body","head"],p=e=>e.reduce((t,r,s)=>0===s?t+r:s===e.length-1?t+" and "+r:t+", "+r,""),f=e=>`‘${e}’`,d=(e,t,r)=>0===r?e+"with "+t:e+" and "+t,y=({name:e})=>Object.keys(c).includes(e),m=({classNames:e=[]})=>0===e.length?"":1===e.length?"class "+f(e[0]):"classes "+p(e.map(f)),g=({id:e})=>e?`id ${f(e)}`:"",v=({pseudos:e=[]})=>{const t=e.filter(y).map(e=>c[e.name]);return t.length>0?`provided it is ${p(t)}`:""},w=e=>{if(""===e.value)return"="===e.operator?"whose value is empty":"";const t=f(e.value);switch(e.operator){case"=":return"whose value is "+t;case"*=":return"whose value contains "+t;case"^=":return"whose value starts with "+t;case"$=":return"whose value ends with "+t;case"~=":return"whose value is a space-separated list of values, one of which is "+t;case"|=":return"whose value is an hyphen-separated list of values, one of which is "+t}},b=({attrs:e=[]})=>p(e.map(e=>["an attribute",f(e.name),w(e)].filter(Boolean).join(" ")));var S=e=>{const{id:t,tagName:r}=e,s=[r&&"*"!==r?f(`<${r}>`):"","element"].filter(Boolean).join(" "),i=t||h.includes(r)?"the":/^[aeiouy]/.test(s.replace("‘<",""))?"an":"a";return(({pseudos:e=[]})=>{const t=e.find(e=>""!==e.name&&!y(e));return t?`the ${f(t.name)} pseudo-element of `:""})(e)+i+" "+s},E=e=>[g,m,b].map(t=>t(e)).filter(Boolean).reduce(d,"");var $=e=>u(e).reduce((e,t,r,s)=>{const i=e+(e=>[S,E,v].map(t=>t(e)).filter(Boolean).join(" "))(t);return r===s.length-1?i:i+(0===r?"":" itself")+(({nestingOperator:e})=>{switch(e){case">":return" directly within ";case"+":return" directly adjacent to ";case"~":return" after ";default:return" somewhere within "}})(t)},"");const A="https://css-tricks.com/examples/nth-child-tester/",C=e=>(e=>e.slice(0,1).toUpperCase()+e.slice(1))(e)+".",k=e=>(t,r)=>"html"===e?`<a href="${r}" rel="noopener noreferrer" target="_blank">${t}</a>`:"markdown"===e?`[${t}](${r})`:t,N=e=>t=>{const r="html"===e?"<br>":"markdown"===e?"  \n":"\n";return t.replace(/([^yf]) within/g,(...e)=>`${e[1]}${r}… within`).replace(/([^y]) after/g,(...e)=>`${e[1]}${r}… after`).replace(/([^f]) directly/g,(...e)=>`${e[1]}${r}… directly`).replace(/element of/g,`element${r}… of`).replace(/itself/g,`${r}… itself`)};var _=(e={})=>t=>{switch(e.format){case"html":return((e,t)=>{let r=C(e).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/‘([^’]+)’/g,(...e)=>`<code>${e[1]}</code>`);if(t.lineBreaks&&(r=N(t.format)(r)),t.links){const e=k(t.format);r=r.replace(/nth child/g,e("nth child",A)).replace(/nth of its type/g,e("nth of its type",A))}return r})(t,e);case"markdown":return((e,t)=>{let r=C(e).replace(/[‘’]/g,"`").replace(/</g,"&lt;").replace(/>/g,"&gt;");if(t.lineBreaks&&(r=N(t.format)(r)),t.links){const e=k(t.format);r=r.replace(/nth child/g,e("nth child",A)).replace(/nth of its type/g,e("nth of its type",A))}return r})(t,e);case"raw":default:return C(t)}};var I=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,t){var r=/(\[[^\]]+\])/g,s=/(#[^\s\.\[\]:]+)/g,i=/(\.[^\s\.:]+)/g,n=/(::[^\s\.:]+|:first-line|:first-letter|:before|:after)/g,a=/(:[^\s\.:]+)/g,o=/([^\s\.:]+)/g,l=/:not\(([^\)]*)\)/g,u=/[\*\s\+>~]+/g;e.exports=function(e){var t,c=[];if(!e)return;if("string"==typeof e)e=e.split(",");else if(!Array.isArray(e))return;if(e.forEach((function(e){var h=function(e){if("string"!=typeof e)return;function t(t){var r=e.match(t);return r?(e=e.replace(t,""),r.length):0}var c=0,h=0,p=0;return e=e.replace(l," $1 ").replace(u," "),c+=t(s),h+=t(r),h+=t(i),p+=t(n),h+=t(a),p+=t(o),[0,c,h,p]}(e);t=t||!!h,c.push(h)})),t)return c.length>1?c:c[0]}}));return{$:{form:document.querySelector("#form"),input:document.querySelector("#selector"),result:document.querySelector("#result"),specificity:document.querySelector("#specificity")},options:{format:"html",links:!0,lineBreaks:!0},results:null,init:function(){this.prefillFromURL(),this.$.form.addEventListener("submit",e=>{e.preventDefault(),this.displayResults(this.$.input.value)})},updateQueryParam:function(e){const t=new URLSearchParams(window.location.search);e?t.set("s",encodeURIComponent(e)):t.delete("s"),history.pushState(null,"","?"+t.toString())},prefillFromURL:function(){const e=new URLSearchParams(window.location.search);if(e.has("s"))try{this.$.input.value=decodeURIComponent(e.get("s")),this.displayResults(this.$.input.value)}catch(e){this.clear("")}},clear:function(){this.results=null,this.$.result.innerHTML="",this.$.specificity.innerHTML="",this.updateQueryParam("")},create:function(e,t,r={}){const s=document.createElement(e);t&&(s.innerHTML=t);for(let e in r)s.setAttribute(e,r[e]);return s},displaySpecificity:function(e){const t=Array.isArray(e[0])?e.map(e=>e.slice(1).join(".")).join(", "):e.slice(1).join("."),r=this.create("a","Specificity",{href:"https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity",target:"_blank",rel:"noopener noreferrer"});this.$.specificity.innerHTML="",this.$.specificity.appendChild(this.create("p",r.outerHTML+": "+t))},displayResults:function(e){let t=this.clear();if(e.indexOf(":not(")>-1)return this.$.result.appendChild(this.create("p","The <code>:not()</code> pseudo-class is not supported."));try{this.results=(r=e,s=this.options,r.split(/\s*,\s*/g).map($).map(_(s))),t=I(e)}catch(e){return this.results=null,t=null,void this.$.result.appendChild(this.create("p",e.message))}var r,s;if(this.updateQueryParam(e),this.displaySpecificity(t),1===this.results.length)this.$.result.appendChild(this.create("p",this.results[0]));else{const e=this.create("ol");this.results.forEach(t=>{e.appendChild(this.create("li",t))}),this.$.result.appendChild(e)}}}}();
